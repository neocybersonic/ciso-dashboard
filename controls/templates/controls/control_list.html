{% extends "base.html" %}
{% block title %}Controls{% endblock %}

{% block content %}
<div class="mx-auto max-w-5xl p-6 bg-white dark:bg-slate-900
            text-slate-900 dark:text-slate-100
            border border-slate-200 dark:border-slate-700
            rounded-2xl shadow-sm">

  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-semibold">Security Controls</h1>
<a href="{% url 'controls:add' %}" class="btn-primary text-sm">
  + New Control
</a>


  </div>

  {% if controls %}
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead class="text-left border-b border-slate-200 dark:border-slate-700">
          <tr>
            <th class="py-2 pr-4">Short Desc</th>
            <th class="py-2 pr-4">Long Desc</th>
            <th class="py-2 pr-4">Owner</th>
            <th class="py-2 pr-4">Status</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-200 dark:divide-slate-800">
          {% for c in controls %}
          <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50">
            <td class="py-3 pr-4 font-medium">{{ c.short_description }}</td>
            <td class="py-3 pr-4">{{ c.long_description|default:"—" }}</td>
            <td class="py-3 pr-4">{{ c.owner|default:"—" }}</td>
            <td class="py-3 pr-4 text-slate-500 dark:text-slate-400">
              {{ c.status }}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    {% if is_paginated %}
      <div class="flex gap-2 mt-6 text-sm">
        {% if page_obj.has_previous %}
          <a class="px-3 py-1 border rounded" href="?page={{ page_obj.previous_page_number }}">Prev</a>
        {% endif %}
        <span class="px-3 py-1">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
          <a class="px-3 py-1 border rounded" href="?page={{ page_obj.next_page_number }}">Next</a>
        {% endif %}
      </div>
    {% endif %}

  {% else %}
    <div class="text-slate-600 dark:text-slate-300">
      No controls yet. Add your first control to get started.
    </div>
  {% endif %}
</div>
{% endblock %}
